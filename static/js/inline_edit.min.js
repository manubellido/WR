if(typeof jQuery=="undefined"){document.write('<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"><\/script>');var __noconflict=true,categories=""}function fill_dropdown(a){content="";current=a.attr("data-current");for(i=0;i<categories.length;i++){selected="";if(categories[i].title==current)selected='selected="selected"';content+="<option "+selected+' value="'+categories[i].id+'">'+categories[i].title+"</option>\n"}a.html(content)}
(function(a){a(function(){jQuery(".btn-primary").ajaxComplete(function(){jQuery(".inline-category-edit").each(function(){fill_dropdown(jQuery(this))})});url="/api/v1/circuits/categories";post_url="/api/v1/circuits/{circuit-id}/patch";jQuery(".inline-category-edit").live("change",function(){cat_id=a(this).val();circuit_id=a(this).attr("data-id");update_url=post_url.replace("{circuit-id}",circuit_id);name=a(this).attr("data-name","");a(this).attr("data-current",a("option:selected",this).text());jQuery.ajax({type:"POST",
url:update_url,data:{category:cat_id,circuit_id:circuit_id},success:function(b){console.log(b);console.log(circuito_actualizado)}})});jQuery.ajax({url:url,dataType:"json",success:function(b){categories=b.categories;jQuery(".inline-category-edit").each(function(){fill_dropdown(jQuery(this))})}})})})(jQuery);
